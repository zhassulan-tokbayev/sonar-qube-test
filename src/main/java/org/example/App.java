package org.example;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 * Hello world!
 *
 */
public class App
{

    private static final String PATTERN_LINK_CONTENT_LEADING_TRAILING_SPACES = "(<a[^>]*)(>)( {1,3}.*|.* {1,3})(<\\/a>)";

    public static void main( String[] args )
    {
        String content = "<bsp-marker data-state=\"{&quot;cms.site.owner&quot;:{&quot;_ref&quot;:&quot;0000014b-3270-d4f3-a3cb-f3ffa8610000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff4161000e&quot;},&quot;cms.content.publishDate&quot;:1661332170578,&quot;cms.content.publishUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;cms.content.updateDate&quot;:1661332170578,&quot;cms.content.updateUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;originalTemplate&quot;:false,&quot;referentialTextMarker&quot;:{&quot;_ref&quot;:&quot;00000150-fda0-d9e3-a5dd-ffae60090000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415d0004&quot;},&quot;_id&quot;:&quot;00000182-cf1b-dc71-a99a-df7f031d0000&quot;,&quot;_type&quot;:&quot;2a84f2ec-4e95-390f-9de8-284a925582ed&quot;}\">Newsletter Ad Copy Marker</bsp-marker>This is a test for <a  href=\"https://www.google.com\" target=\"_blank\" link-data=\"{&quot;cms.site.owner&quot;:{&quot;_ref&quot;:&quot;0000014b-3270-d4f3-a3cb-f3ffa8610000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff4161000e&quot;},&quot;cms.content.publishDate&quot;:1661240970646,&quot;cms.content.publishUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;cms.content.updateDate&quot;:1661240970646,&quot;cms.content.updateUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;originalTemplate&quot;:false,&quot;link&quot;:{&quot;originalTemplate&quot;:false,&quot;attributes&quot;:[],&quot;target&quot;:&quot;NEW&quot;,&quot;url&quot;:&quot;https://www.google.com&quot;,&quot;_id&quot;:&quot;00000182-c9ad-d961-a38b-c9ff6ce50000&quot;,&quot;_type&quot;:&quot;33ac701a-72c1-316a-a3a5-13918cf384df&quot;},&quot;linkText&quot;:&quot;for newsletter &quot;,&quot;_id&quot;:&quot;00000182-c9ad-d961-a38b-c9ff6ce40000&quot;,&quot;_type&quot;:&quot;02ec1f82-5e56-3b8c-af6e-6fc7c8772266&quot;}\">newsletter </a>entry. 11. This is a test for<a  href=\"https://www.google.com\" target=\"_blank\" link-data=\"{&quot;cms.site.owner&quot;:{&quot;_ref&quot;:&quot;0000014b-3270-d4f3-a3cb-f3ffa8610000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff4161000e&quot;},&quot;cms.content.publishDate&quot;:1661240987728,&quot;cms.content.publishUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;cms.content.updateDate&quot;:1661240987728,&quot;cms.content.updateUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;originalTemplate&quot;:false,&quot;link&quot;:{&quot;originalTemplate&quot;:false,&quot;attributes&quot;:[],&quot;target&quot;:&quot;NEW&quot;,&quot;url&quot;:&quot;https://www.google.com&quot;,&quot;_id&quot;:&quot;00000182-c9ad-d961-a38b-c9ffc90c0001&quot;,&quot;_type&quot;:&quot;33ac701a-72c1-316a-a3a5-13918cf384df&quot;},&quot;linkText&quot;:&quot; newsletter &quot;,&quot;_id&quot;:&quot;00000182-c9ad-d961-a38b-c9ffc90c0000&quot;,&quot;_type&quot;:&quot;02ec1f82-5e56-3b8c-af6e-6fc7c8772266&quot;}\"> newsletter </a>entry. dd<br/><bsp-marker data-state=\"{&quot;cms.site.owner&quot;:{&quot;_ref&quot;:&quot;0000014b-3270-d4f3-a3cb-f3ffa8610000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff4161000e&quot;},&quot;cms.content.publishDate&quot;:1661332175591,&quot;cms.content.publishUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;cms.content.updateDate&quot;:1661332175591,&quot;cms.content.updateUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;originalTemplate&quot;:false,&quot;referentialTextMarker&quot;:{&quot;_ref&quot;:&quot;00000150-fda0-d9e3-a5dd-ffae60090000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415d0004&quot;},&quot;_id&quot;:&quot;00000182-cf1a-dc71-a99a-df7fd0b80000&quot;,&quot;_type&quot;:&quot;2a84f2ec-4e95-390f-9de8-284a925582ed&quot;}\">Newsletter Ad Copy Marker</bsp-marker>This is a test for <a  href=\"https://www.google.com\" target=\"_blank\" link-data=\"{&quot;cms.site.owner&quot;:{&quot;_ref&quot;:&quot;0000014b-3270-d4f3-a3cb-f3ffa8610000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff4161000e&quot;},&quot;cms.content.publishDate&quot;:1661240976096,&quot;cms.content.publishUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;cms.content.updateDate&quot;:1661240976096,&quot;cms.content.updateUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;originalTemplate&quot;:false,&quot;link&quot;:{&quot;originalTemplate&quot;:false,&quot;attributes&quot;:[],&quot;target&quot;:&quot;NEW&quot;,&quot;url&quot;:&quot;https://www.google.com&quot;,&quot;_id&quot;:&quot;00000182-c9ad-d961-a38b-c9ff9a5f0001&quot;,&quot;_type&quot;:&quot;33ac701a-72c1-316a-a3a5-13918cf384df&quot;},&quot;linkText&quot;:&quot;newsletter&quot;,&quot;_id&quot;:&quot;00000182-c9ad-d961-a38b-c9ff9a5f0000&quot;,&quot;_type&quot;:&quot;02ec1f82-5e56-3b8c-af6e-6fc7c8772266&quot;}\">newsletter</a> entry.<br/><bsp-marker data-state=\"{&quot;cms.site.owner&quot;:{&quot;_ref&quot;:&quot;0000014b-3270-d4f3-a3cb-f3ffa8610000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff4161000e&quot;},&quot;cms.content.publishDate&quot;:1661332180326,&quot;cms.content.publishUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;cms.content.updateDate&quot;:1661332180326,&quot;cms.content.updateUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;originalTemplate&quot;:false,&quot;referentialTextMarker&quot;:{&quot;_ref&quot;:&quot;00000150-fda0-d9e3-a5dd-ffae60090000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415d0004&quot;},&quot;_id&quot;:&quot;00000182-cf1a-dc71-a99a-df7f4f7d0000&quot;,&quot;_type&quot;:&quot;2a84f2ec-4e95-390f-9de8-284a925582ed&quot;}\">Newsletter Ad Copy Marker</bsp-marker>This is a test forentry<a  href=\"https://www.google.com\" target=\"_blank\" link-data=\"{&quot;cms.site.owner&quot;:{&quot;_ref&quot;:&quot;0000014b-3270-d4f3-a3cb-f3ffa8610000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff4161000e&quot;},&quot;cms.content.publishDate&quot;:1661421394040,&quot;cms.content.publishUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;cms.content.updateDate&quot;:1661421394040,&quot;cms.content.updateUser&quot;:{&quot;_ref&quot;:&quot;0000017c-1740-d661-a9fd-9762a8860000&quot;,&quot;_type&quot;:&quot;0000014b-324d-d4f3-a3cb-f3ff415b0002&quot;},&quot;originalTemplate&quot;:false,&quot;link&quot;:{&quot;originalTemplate&quot;:false,&quot;attributes&quot;:[],&quot;target&quot;:&quot;NEW&quot;,&quot;url&quot;:&quot;https://www.google.com&quot;,&quot;_id&quot;:&quot;00000182-d46e-dab9-ad86-fe6f7fd60001&quot;,&quot;_type&quot;:&quot;33ac701a-72c1-316a-a3a5-13918cf384df&quot;},&quot;linkText&quot;:&quot; link&quot;,&quot;_id&quot;:&quot;00000182-d46e-dab9-ad86-fe6f7fd60000&quot;,&quot;_type&quot;:&quot;02ec1f82-5e56-3b8c-af6e-6fc7c8772266&quot;}\"> link</a> to test.";
        content = trimHyperlinkContent(content);
        System.out.println(content);
    }

    public static String trimHyperlinkContent(String text) {
        StringBuffer stringBuffer = new StringBuffer(text);
        Pattern pattern = Pattern.compile(PATTERN_LINK_CONTENT_LEADING_TRAILING_SPACES);
        Matcher matcher = pattern.matcher(text);
        while (matcher.find()) {
            String replace = matcher.group(1) + matcher.group(2) + matcher.group(3).trim() + matcher.group(4);
            stringBuffer.replace(matcher.start(), matcher.end(), replace);
            matcher = pattern.matcher(stringBuffer.toString());
        }
        return stringBuffer.toString();
    }
}
